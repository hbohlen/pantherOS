---
title: Yoga Single-NVMe Subvolume Layout
---
flowchart TB
    %% Single Pool
    subgraph "Single Pool (/dev/nvme0n1 - 1TB)"
        direction TB
        ROOT[@ (Root)<br/>compress=zstd:3<br/>noatime, ssd]
        HOME[@home<br/>compress=zstd:3<br/>noatime, ssd]
        NIX[@nix<br/>nodatacow<br/>compress=zstd:1, ssd]
        CONTAINERS[@containers<br/>nodatacow<br/>compress=no, ssd]
        BACKUP[@backups<br/>compress=zstd:3<br/>noatime, ssd]
        PG[@postgresql<br/>nodatacow<br/>compress=no, ssd<br/>optional]
        REDIS[@redis<br/>nodatacow<br/>compress=no, ssd<br/>optional]
    end

    %% Mount Points
    ROOT -.-> |/| ROOT_M[Root Filesystem<br/>SSD Optimized]
    HOME -.-> |/home| HOME_M[User Data<br/>SSD Optimized]
    NIX -.-> |/nix| NIX_M[Nix Store<br/>NoCoW + SSD]
    CONTAINERS -.-> |/var/lib/containers| CON_M[Container Storage<br/>NoCoW + SSD]
    BACKUP -.-> |/var/lib/backups| BACKUP_M[Backup Storage<br/>SSD Optimized]
    PG -.-> |/var/lib/postgresql| PG_M[PostgreSQL Data<br/>NoCoW + SSD<br/>Optional]
    REDIS -.-> |/var/lib/redis| RD_M[Redis Data<br/>NoCoW + SSD<br/>Optional]

    %% Relationships
    ROOT --> HOME
    ROOT --> NIX
    ROOT --> CONTAINERS
    ROOT --> BACKUP
    ROOT --> PG
    ROOT --> REDIS

    %% Snapshot Configuration
    SNAP_CONFIG[Snapshot Policy<br/>Daily: 7<br/>Weekly: 4<br/>Monthly: 12]
    SNAP_CONFIG --> ROOT
    SNAP_CONFIG --> HOME
    SNAP_CONFIG --> CONTAINERS

    %% Styling
    classDef pool fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef nodatacow fill:#ffeb3b,stroke:#f57f17,stroke-width:3px
    classDef optional fill:#fff9c4,stroke:#f9a825,stroke-width:2px,stroke-dasharray: 5 5
    classDef mount fill:#f5f5f5,stroke:#616161,stroke-width:1px,stroke-dasharray: 5 5
    classDef policy fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px

    class ROOT,HOME,CONTAINERS,BACKUP pool
    class NIX,CONTAINERS,PG,REDIS nodatacow
    class PG,REDIS optional
    class ROOT_M,HOME_M,NIX_M,CON_M,BACKUP_M,PG_M,RD_M mount
    class SNAP_CONFIG policy
